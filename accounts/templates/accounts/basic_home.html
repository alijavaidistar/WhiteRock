{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>User Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="{% static 'css/basicHome.css' %}">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

</head>
<body>

<div class="full-dashboard">

  <!-- Header -->
  <div class="header">
    <div>
      <span class="user-badge"><i class="fas fa-user"></i> Basic Panel</span>
      <span class="ms-2">Welcome, {{ user.username }}!</span>
    </div>
    <a href="{% url 'logout' %}" class="btn btn-logout btn-sm"><i class="fas fa-sign-out-alt"></i> Logout</a>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">

    <!-- Left Panel -->
    <div class="left-panel">
      <!-- User Info -->
      <div class="user-info-box">
        <h5>User Info</h5>
        <p><strong>Username:</strong> {{ user.username }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
      </div>

      <!-- Request Form -->
      <div class="request-form-box">
        <h5>Submit Request</h5>
        <form action="{% url 'submit_request' %}" method="get">
          <select class="form-select" name="form_name">
            <option value="Term Withdrawal Request">Term Withdrawal Request</option>
            <option value="Veteran Benefits">Submit Veteran Benefits Request</option>
            <option value="RCE Exam Evaluation">RCE Exam Evaluation</option>
            <option value="Special Request Options">Special Request Options</option>
          </select>
          <button type="submit" class="btn btn-primary w-100 mt-3">Proceed</button>
        </form>
      </div>

      <a href="{% url 'user_activity' %}" class="btn btn-view mt-auto">
        <i class="fas fa-clock"></i> View User Activity
      </a>

      <!-- View My Requests Button -->
      <a href="{% url 'request_list' %}" class="btn btn-view mt-auto"><i class="fas fa-list"></i> View My Requests</a>
    </div>

    <!-- Right Panel: Submitted Requests -->
    <div class="right-panel">
      <h4>Your Submitted Requests</h4>
      {% if requests %}
        <table>
          <thead>
          <tr>
            <th>Form Name</th>
            <th>Status</th>
            <th>Submitted At</th>
          </tr>
          </thead>
          <tbody>
          {% for req in requests %}
            <tr>
              <td>{{ req.form_name }}</td>
              <td>{{ req.status }}</td>
              <td>{{ req.submitted_at }}</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="text-muted mt-3">You have not submitted any requests yet.</p>
      {% endif %}
    </div>
  </div>
</div>

</body>
</html>
